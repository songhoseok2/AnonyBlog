{% extends "layout.html" %} {% block content %}<body><main role="main" class="container"><div class="row"><div class="col-md-8">{% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages %}<div class="alert alert-{{ category }}">{{ message }}</div>{% endfor %} {% endif %} {% endwith %}<article class="media content-section">{% if post.is_anonymous %}<div class="OP_profile_pic_class"></div>{% else %} <img class="rounded-circle article-img" src="{{ url_for('static', filename='profile_pics/' + post.author.image_file) }}"> {% endif %}<div class="media-body"><div class="article-metadata">{% if post.is_anonymous %} {% if post.author.username == current_user_username %} <a class="mr-2" href="{{ url_for('users.renderUserPosts', selected_username=post.author.username)}}">{{ post.author.username }} - (Rendered anonymous to the public)<br></a>{% else %} <a class="mr-2">Anonymous_OP</a> {% endif %} {% else %} <a class="mr-2" href="{{ url_for('users.renderUserPosts', selected_username=post.author.username)}}">{{ post.author.username }}</a> {% endif %} <small class="text-muted">{{ post.date_posted.strftime('%m/%d/%Y') }}</small> {% if post.author == current_user %} <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{ url_for('posts.updatePost', post_id=post.id) }}">Update</a> <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{ url_for('posts.changePostIdentity', post_id=post.id) }}">{% if post.is_anonymous %} Reveal identity {% else %} Go anonymous {% endif %} </a><button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deletePostModal">Delete</button> {% endif %}</div><h2 class="article-title">{{ post.title }}</h2><p class="article-content">{{ post.content }}</p></div></article><div class="comment-section">{% for comment in comments %}<article class="media content-section">{% if comment.is_anonymous %}<div class="OP_profile_pic_class"></div>{% else %} <img class="rounded-circle article-img" src="{{ url_for('static', filename='profile_pics/' + comment.commenter.image_file) }}"> {% endif %}<div class="media-body"><div class="article-metadata">{% if comment.is_anonymous %} {% if comment.user_id == post.author.id %} {% if comment.user_id == current_user_user_id %} <a class="mr-2" href="{{ url_for('users.renderUserPosts', selected_username=comment.commenter.username)}}">{{ comment.commenter.username }} - (Rendered anonymous to the public)<br></a>{% else %} <a class="mr-2">Anonymous_OP</a> {% endif %} {% else %} {% for anonymous_number in anonymous_number_table %} {% if anonymous_number["user_id"] == comment.user_id %} <a class="mr-2">Anonymous - {{anonymous_number["number"]}}</a> {% endif %} {% endfor %} {% endif %} {% else %} <a class="mr-2" href="{{ url_for('users.renderUserPosts', selected_username=comment.commenter.username)}}">{{ comment.commenter.username }}</a> {% endif %} <small class="text-muted">{{ post.date_posted.strftime('%m/%d/%Y') }}</small> {% if comment.user_id == current_user_user_id %} <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{ url_for('posts.updateComment', post_id=post.id, comment_id=comment.id) }}">Update</a> <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{ url_for('posts.changeCommentIdentity', post_id=post.id, comment_id=comment.id) }}">{% if comment.is_anonymous %} Reveal identity {% else %} Go anonymous {% endif %} </a><button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="{{'#deleteCommentModal' + (comment.id | string)}}">Delete</button> {% endif %}</div><p class="article-content">{{ comment.content }}</p></div></article><div class="modal fade" id="{{'deleteCommentModal' + (comment.id | string)}}" tabindex="-1" role="dialog" aria-labelledby="deleteCommentModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="deleteCommentModalLabel">Delete Comment?</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button><form action="{{ url_for('posts.deleteComment', post_id=post.id, comment_id=comment.id) }}" method="POST"><input class="btn btn-danger" type="submit" value="Delete"></form></div></div></div></div>{% endfor %}</div>{% if current_user_username != "Guest" %}<div class="content-section"><form method="POST" action="">{{ form.hidden_tag() }}<fieldset class="form-group"><div class="form-group">{{ form.content.label(class="form-control-label") }} {% if form.content.errors %} {{ form.content(class="form-control form-control-lg is-invalid") }}<div class="invalid-feedback">{% for error in form.content.errors %} <span>{{ error }}</span> {% endfor %}</div>{% else %} {{ form.content(class="form-control form-control-lg") }} {% endif %}</div></fieldset><div class="form-group">{{ form.submit(class="btn btn-outline-info") }}</div></form></div>{% endif %}<div class="modal fade" id="deletePostModal" tabindex="-1" role="dialog" aria-labelledby="deletePostModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="deletePostModalLabel">Delete Post?</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button><form action="{{ url_for('posts.deletePost', post_id=post.id) }}" method="POST"><input class="btn btn-danger" type="submit" value="Delete"></form></div></div></div></div></div><div class="col-md-4"><div id="side_navbar_id"></div></div></div></main><script>!function(e){function t(t){for(var n,a,f=t[0],l=t[1],c=t[2],p=0,s=[];p<f.length;p++)a=f[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&s.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(i&&i(t);s.length;)s.shift()();return u.push.apply(u,c||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,f=1;f<r.length;f++){var l=r[f];0!==o[l]&&(n=!1)}n&&(u.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={1:0},u=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../static/react/";var f=this.webpackJsonpreact_frontend=this.webpackJsonpreact_frontend||[],l=f.push.bind(f);f.push=t,f=f.slice();for(var c=0;c<f.length;c++)t(f[c]);var i=l;r()}([])</script><script src="../../../static/react/js/2.63e994d4.chunk.js"></script><script src="../../../static/react/js/main.ee24dbcc.chunk.js"></script></body>{% endblock content %}